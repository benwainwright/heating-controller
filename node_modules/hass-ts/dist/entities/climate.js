"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Climate = void 0;
const _core_1 = require("../core");
const service_command_1 = require("../core/service-command");
class Climate {
    constructor(id, client) {
        this.id = id;
        this.entity = new _core_1.Entity(this.id, client);
        this.setAuxHeatCommand = new service_command_1.ServiceCommand("climate.set_aux_heat", client);
        this.setHvacModeCommand = new service_command_1.ServiceCommand("climate.set_hvac_mode", client);
        this.setPresetModeCommand = new service_command_1.ServiceCommand("climate.set_preset_mode", client);
        this.setTemperatureCommand = new service_command_1.ServiceCommand("climate.set_temperature", client);
    }
    async setTemperature(args) {
        this.setTemperatureCommand.call({ ...args, entity_id: this.id });
    }
    async setAuxHeat(auxHeat) {
        this.setAuxHeatCommand.call({
            entity_id: this.id,
            aux_heat: auxHeat,
        });
    }
    async setHvacMode(mode) {
        this.setHvacModeCommand.call({
            entity_id: this.id,
            hvac_mode: mode,
        });
    }
    async setPresetMode(mode) {
        this.setPresetModeCommand.call({
            entity_id: this.id,
            preset_mode: mode,
        });
    }
    onStateChange(callback) {
        this.entity.onStateChanged((oldState, newState) => {
            if (oldState.entity_id === this.id && newState.entity_id === this.id) {
                callback(oldState, newState);
            }
        });
    }
}
exports.Climate = Climate;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpbWF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbnRpdGllcy9jbGltYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUF1QztBQUV2Qyw2REFBeUQ7QUFjekQsTUFBYSxPQUFPO0lBT2xCLFlBQW9CLEVBQUssRUFBRSxNQUFjO1FBQXJCLE9BQUUsR0FBRixFQUFFLENBQUc7UUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLGNBQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRTFDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGdDQUFjLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFNUUsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksZ0NBQWMsQ0FDMUMsdUJBQXVCLEVBQ3ZCLE1BQU0sQ0FDUCxDQUFDO1FBRUYsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksZ0NBQWMsQ0FDNUMseUJBQXlCLEVBQ3pCLE1BQU0sQ0FDUCxDQUFDO1FBRUYsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksZ0NBQWMsQ0FDN0MseUJBQXlCLEVBQ3pCLE1BQU0sQ0FDUCxDQUFDO0lBQ0osQ0FBQztJQUVNLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBd0I7UUFDbEQsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRU0sS0FBSyxDQUFDLFVBQVUsQ0FBQyxPQUFlO1FBQ3JDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7WUFDMUIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ2xCLFFBQVEsRUFBRSxPQUFPO1NBQ2xCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLElBQVk7UUFDbkMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQztZQUMzQixTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUU7WUFDbEIsU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBWTtRQUNyQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO1lBQzdCLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRTtZQUNsQixXQUFXLEVBQUUsSUFBSTtTQUNsQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sYUFBYSxDQUFDLFFBQTZCO1FBQ2hELElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFO1lBQ2hELElBQUksUUFBUSxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsRUFBRSxJQUFJLFFBQVEsQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDcEUsUUFBUSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQzthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBNURELDBCQTREQyJ9